<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T√≠nh Thu·∫ø TNCN - Giao di·ªán chuy√™n nghi·ªáp</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f0f4f8; }
    </style>
</head>
<body class="p-4 md:p-10">

    <div class="max-w-3xl mx-auto bg-white rounded-2xl shadow-lg overflow-hidden">
        <div class="bg-blue-50 py-8 px-6 text-center">
            <h1 class="text-2xl md:text-3xl font-bold text-blue-600">
                C√°ch 1: T√≠nh thu·∫ø TNCN ph·∫£i n·ªôp d·ª±a tr√™n m·ª©c l∆∞∆°ng NET (Theo th√°ng)
            </h1>
        </div>

        <div class="p-6 md:p-10 space-y-6">
            <div class="space-y-4">
                <div class="flex flex-col md:flex-row md:items-center justify-between gap-2">
                    <label class="font-semibold text-gray-700 flex items-center">
                        <span class="mr-2">üí∞</span> T·ªïng thu nh·∫≠p (NET) <span class="text-red-500 ml-1">* (i)</span>
                    </label>
                    <input type="number" id="income" value="15000000" oninput="calculate()"
                        class="w-full md:w-2/3 border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-400 outline-none transition">
                </div>

                <div class="flex flex-col md:flex-row md:items-center justify-between gap-2">
                    <label class="font-semibold text-gray-700 flex items-center">
                        <span class="mr-2">üë•</span> S·ªë l∆∞·ª£ng ng∆∞·ªùi ph·ª• thu·ªôc <span class="text-red-500 ml-1">*</span>
                    </label>
                    <input type="number" id="dependents" value="0" oninput="calculate()"
                        class="w-full md:w-2/3 border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-400 outline-none transition">
                </div>

                <div class="flex flex-col md:flex-row md:items-center justify-between gap-2 pt-4 border-t">
                    <label class="font-semibold text-gray-700 flex items-center">
                        <span class="mr-2">üí∏</span> S·ªë thu·∫ø TNCN c·∫ßn n·ªôp
                    </label>
                    <input type="text" id="taxResult" readonly
                        class="w-full md:w-2/3 bg-blue-50 border border-blue-100 text-blue-600 font-bold rounded-lg px-4 py-2 outline-none">
                </div>
                <p class="text-sm text-gray-400 italic font-light">√î ƒë√°nh d·∫•u * b·∫Øt bu·ªôc ƒëi·ªÅn d·ªØ li·ªáu</p>
            </div>

            <hr class="border-dashed border-gray-200">

            <div class="space-y-4">
                <h3 class="font-bold text-gray-800">Di·ªÖn gi·∫£i c√°ch t√≠nh thu·∫ø thu nh·∫≠p c√° nh√¢n chi ti·∫øt t·∫°i b·∫£ng d∆∞·ªõi ƒë√¢y:</h3>
                <div class="bg-white border border-gray-100 rounded-xl p-6 space-y-3 text-gray-700">
                    <div class="flex justify-between">
                        <span>Gi·∫£m tr·ª´ b·∫£n th√¢n</span>
                        <span class="font-medium">= 11.000.000</span>
                    </div>
                    <div class="flex justify-between">
                        <span>Gi·∫£m tr·ª´ ng∆∞·ªùi ph·ª• thu·ªôc</span>
                        <span class="font-medium" id="explainDependents">= 4.400.000 x 0 = 0</span>
                    </div>
                    <div class="flex justify-between text-blue-600 font-semibold bg-blue-50 p-2 rounded">
                        <span>T·ªïng thu nh·∫≠p t√≠nh thu·∫ø</span>
                        <span id="explainTaxableIncome">= 4.000.000</span>
                    </div>
                    <div class="flex justify-between border-t pt-3">
                        <span class="font-bold text-gray-800 text-lg">S·ªë thu·∫ø TNCN c·∫ßn n·ªôp</span>
                        <span class="font-bold text-blue-600 text-lg" id="explainFinalTax">= 200.000</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function formatMoney(num) {
            return new Intl.NumberFormat('vi-VN').format(num);
        }

        function calculate() {
            const income = parseFloat(document.getElementById('income').value) || 0;
            const dependents = parseInt(document.getElementById('dependents').value) || 0;

            const giamTruBanThan = 11000000;
            const giamTruPhuThuoc = dependents * 4400000;

            // Thu nh·∫≠p t√≠nh thu·∫ø = Thu nh·∫≠p NET - C√°c kho·∫£n gi·∫£m tr·ª´
            // L∆∞u √Ω: ƒê√¢y l√† v√≠ d·ª• d·ª±a tr√™n ·∫£nh b·∫°n g·ª≠i (NET tr·ª´ tr·ª±c ti·∫øp gi·∫£m tr·ª´)
            let thuNhapTinhThue = income - giamTruBanThan - giamTruPhuThuoc;
            if (thuNhapTinhThue < 0) thuNhapTinhThue = 0;

            // T√≠nh thu·∫ø l≈©y ti·∫øn (C√¥ng th·ª©c r√∫t g·ªçn)
            let thue = 0;
            if (thuNhapTinhThue <= 5000000) thue = thuNhapTinhThue * 0.05;
            else if (thuNhapTinhThue <= 10000000) thue = thuNhapTinhThue * 0.1 - 250000;
            else if (thuNhapTinhThue <= 18000000) thue = thuNhapTinhThue * 0.15 - 750000;
            else if (thuNhapTinhThue <= 32000000) thue = thuNhapTinhThue * 0.2 - 1650000;
            else if (thuNhapTinhThue <= 52000000) thue = thuNhapTinhThue * 0.25 - 3250000;
            else if (thuNhapTinhThue <= 80000000) thue = thuNhapTinhThue * 0.3 - 5850000;
            else thue = thuNhapTinhThue * 0.35 - 9850000;

            // C·∫≠p nh·∫≠t giao di·ªán
            document.getElementById('taxResult').value = formatMoney(thue);
            
            // C·∫≠p nh·∫≠t b·∫£ng di·ªÖn gi·∫£i
            document.getElementById('explainDependents').innerText = `= 4.400.000 x ${dependents} = ${formatMoney(giamTruPhuThuoc)}`;
            document.getElementById('explainTaxableIncome').innerText = `= ${formatMoney(income)} - 11.000.000 - ${formatMoney(giamTruPhuThuoc)} = ${formatMoney(thuNhapTinhThue)}`;
            document.getElementById('explainFinalTax').innerText = `= ${formatMoney(thue)}`;
        }

        // Ch·∫°y l·∫ßn ƒë·∫ßu khi load trang
        calculate();
    </script>
</body>
</html>
